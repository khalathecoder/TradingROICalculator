@page "/journal"
@rendermode @(new InteractiveServerRenderMode(prerender: false))

<h3 class="text-center mb-3">SurePath Trading – Journal</h3>

<div class="card p-4 mb-4">
    <div class="mb-3">
        <label class="form-label fw-bold">Notes</label>

        <textarea class="form-control"
                  rows="10"
                  @bind="_notes"
                  @bind:event="oninput">
        </textarea>
    </div>

    <button type="button" class="btn btn-primary" @onclick="AddEntry">
        Add Entry
    </button>
</div>

@if (_entries.Count > 0)
{
    <div class="list-group">
        @foreach (var e in _entries.OrderByDescending(x => x.CreatedUtc))
        {
            <div class="list-group-item mb-2">
                <small class="text-muted">@e.CreatedUtc.ToLocalTime().ToString("g")</small>
                <p class="mb-0">@e.Notes</p>
            </div>
        }
    </div>
}
else
{
    <p class="text-muted">No journal entries yet. Add your first note above.</p>
}

@code {
    private string _notes = "";
    private readonly List<Entry> _entries = new();

    private void AddEntry()
    {
        if (string.IsNullOrWhiteSpace(_notes)) return;

        _entries.Add(new Entry
        {
            CreatedUtc = DateTime.UtcNow,
            Notes = _notes.Trim()
        });

        _notes = "";
    }

    private class Entry
    {
        public DateTime CreatedUtc { get; set; }
        public string Notes { get; set; } = "";
    }
}
